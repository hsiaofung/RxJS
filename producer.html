<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      class Producer {
        constructor() {
          this.listerners = [];
        }

        addListener(listerner) {
          if (typeof listerner === 'function') {
            this.listerners.push(listerner);
          } else {
            throw new Error('listener 必須是 function');
          }
        }

        removeListener(listener) {
          this.listerners.splice(this.listerners.indexOf(listener), 1);
        }

        notify(message) {
          this.listerners.forEach((listener) => {
            listener(message);
          });
        }
      }

      var egghead = new Producer();

      function listener1(message) {
        console.log(message + 'from listener1');
      }

      function listener2(message) {
        console.log(message + 'from listener2');
      }

      egghead.addListener(listener1); // 註冊監聽
      egghead.addListener(listener2); // 註冊監聽

      egghead.notify('A new course!!'); // 當某件事情方法時，執行
    </script>
  </body>
</html>
